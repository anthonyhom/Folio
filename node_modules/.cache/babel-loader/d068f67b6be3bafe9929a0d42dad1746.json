{"ast":null,"code":"var _jsxFileName = \"/Users/anthonyhom/Documents/atam-web/src/Component/FirstTimeLogin.js\";\nimport React from \"react\";\nimport \"../css/post.css\";\nimport \"../css/firsttimelogin.css\";\nexport default class FirstTimeLogin extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getUserInfo = event => {\n      event.preventDefault(); //make the api call to the authentication page\n\n      fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n        method: \"post\",\n        body: JSON.stringify({\n          action: \"getUsers\",\n          userid: sessionStorage.getItem(\"user\")\n        })\n      }).then(res => res.json()).then(result => {\n        // console.log(result);\n        this.setState({\n          email: result.users[0].email_addr,\n          otp: result.users[0].otp,\n          pass: result.users[0].password\n        });\n        this.updatePrefs();\n        this.props.togglePage(\"main\");\n      }, error => {\n        alert(\"THIS IS GETTING USER INFO!\");\n      });\n    };\n\n    this.updatePrefs = () => {\n      // this.getUserInfo();\n      //keep the form from actually submitting\n      //make the api call to the authentication page\n      fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n        method: \"post\",\n        body: JSON.stringify({\n          action: \"addOrEditUsers\",\n          user_id: sessionStorage.getItem(\"user\"),\n          userid: sessionStorage.getItem(\"user\"),\n          session_token: sessionStorage.getItem(\"token\"),\n          emailaddr: this.state.email,\n          password: this.state.pass,\n          otp: this.state.otp,\n          name: this.state.dname,\n          firstname: this.state.fname,\n          lastname: this.state.lname,\n          status: \"public\"\n        })\n      }).then(res => res.json()).then(result => {\n        if (result) {\n          sessionStorage.setItem(\"dname\", this.state.dname);\n          this.setState({\n            result: \"Successfully Updated!\"\n          });\n          window.location.reload(false);\n        } else {\n          sessionStorage.removeItem(\"dname\");\n        }\n      }, error => {\n        alert(\"THIS IS SETTING USER NAME!\");\n      });\n    };\n\n    this.state = {\n      dname: \"\",\n      fname: \"\",\n      lname: \"\",\n      otp: \"\",\n      email: \"\",\n      pass: \"\",\n      result: \"\"\n    };\n  }\n\n  handleChange(e) {\n    this.setState({ ...this.state,\n      [e.target.name]: e.target.value\n    });\n  }\n\n  render() {\n    let logo = require(\"../logo.svg\");\n\n    return React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" row card-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"tab\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Hello!!\")), React.createElement(\"div\", {\n      className: \"row card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      alt: \"logo\",\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \" row welcome\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Welcome!!\"), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), \"The Team at Folio wants to thank you for joining! \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Lets Get Started With Your Basic Information:\"))), React.createElement(\"div\", {\n      className: \"row card-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"dname\",\n      placeholder: \"Display Name\",\n      onChange: e => this.handleChange(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"fname\",\n      placeholder: \"First Name\",\n      onChange: e => this.handleChange(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"lname\",\n      placeholder: \"Last Name\",\n      onChange: e => this.handleChange(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, this.state.result))), React.createElement(\"div\", {\n      className: \"row signup-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"submit-button\",\n      onClick: e => this.getUserInfo(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Update!\")))));\n  }\n\n}","map":{"version":3,"sources":["/Users/anthonyhom/Documents/atam-web/src/Component/FirstTimeLogin.js"],"names":["React","FirstTimeLogin","Component","constructor","props","getUserInfo","event","preventDefault","fetch","method","body","JSON","stringify","action","userid","sessionStorage","getItem","then","res","json","result","setState","email","users","email_addr","otp","pass","password","updatePrefs","togglePage","error","alert","user_id","session_token","emailaddr","state","name","dname","firstname","fname","lastname","lname","status","setItem","window","location","reload","removeItem","handleChange","e","target","value","render","logo","require"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../css/post.css\";\nimport \"../css/firsttimelogin.css\";\n\nexport default class FirstTimeLogin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dname: \"\",\n      fname: \"\",\n      lname: \"\",\n      otp: \"\",\n      email: \"\",\n      pass: \"\",\n      result: \"\",\n    };\n  }\n\n  handleChange(e) {\n    this.setState({\n      ...this.state,\n      [e.target.name]: e.target.value,\n    });\n  }\n\n  getUserInfo = (event) => {\n    event.preventDefault();\n    //make the api call to the authentication page\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getUsers\",\n        userid: sessionStorage.getItem(\"user\"),\n      }),\n    })\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          // console.log(result);\n          this.setState({\n            email: result.users[0].email_addr,\n            otp: result.users[0].otp,\n            pass: result.users[0].password,\n          });\n\n          this.updatePrefs();\n          this.props.togglePage(\"main\");\n        },\n        (error) => {\n          alert(\"THIS IS GETTING USER INFO!\");\n        }\n      );\n  };\n\n  updatePrefs = () => {\n    // this.getUserInfo();\n    //keep the form from actually submitting\n    //make the api call to the authentication page\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"addOrEditUsers\",\n        user_id: sessionStorage.getItem(\"user\"),\n        userid: sessionStorage.getItem(\"user\"),\n        session_token: sessionStorage.getItem(\"token\"),\n        emailaddr: this.state.email,\n        password: this.state.pass,\n        otp: this.state.otp,\n        name: this.state.dname,\n        firstname: this.state.fname,\n        lastname: this.state.lname,\n        status: \"public\",\n      }),\n    })\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          if (result) {\n            sessionStorage.setItem(\"dname\", this.state.dname);\n            this.setState({\n              result: \"Successfully Updated!\",\n            });\n            window.location.reload(false);\n          } else {\n            sessionStorage.removeItem(\"dname\");\n          }\n        },\n        (error) => {\n          alert(\"THIS IS SETTING USER NAME!\");\n        }\n      );\n  };\n\n  render() {\n    let logo = require(\"../logo.svg\");\n    return (\n      <div className=\"card\">\n        <div className=\" row card-header\">\n          <div className=\"tab\">Hello!!</div>\n        </div>\n        <div className=\"row card-body\">\n          <img src={logo} alt=\"logo\" className=\"logo\" />\n          <div className=\" row welcome\">\n            <b>Welcome!!</b> <br />\n            The Team at Folio wants to thank you for joining! <br />\n            <b>Lets Get Started With Your Basic Information:</b>\n          </div>\n        </div>\n        <div className=\"row card-footer\">\n          <form>\n            <div className=\"form-input\">\n              <input\n                type=\"text\"\n                name=\"dname\"\n                placeholder=\"Display Name\"\n                onChange={(e) => this.handleChange(e)}\n              ></input>\n              <input\n                type=\"text\"\n                name=\"fname\"\n                placeholder=\"First Name\"\n                onChange={(e) => this.handleChange(e)}\n              ></input>\n              <input\n                type=\"text\"\n                name=\"lname\"\n                placeholder=\"Last Name\"\n                onChange={(e) => this.handleChange(e)}\n              />\n              <div className=\"message\">{this.state.result}</div>\n            </div>\n          </form>\n          <div className=\"row signup-footer\">\n            <button\n              className=\"submit-button\"\n              onClick={(e) => this.getUserInfo(e)}\n            >\n              <span>Update!</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}