{"ast":null,"code":"var _jsxFileName = \"/Users/anthonyhom/Documents/atam-web/src/Component/NotificationList.js\";\nimport React from \"react\";\nimport \"../App.css\";\nimport Notification from \"../Component/Notification\";\nexport default class NotificationList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userid: \"\",\n      notifications: []\n    };\n  }\n\n  componentDidMount() {\n    //we call results here\n    //make the api call to the user API to get the user with all of their attached preferences\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/uacontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getUserArtifacts\",\n        userid: sessionStorage.getItem(\"user\"),\n        artifactcategory: \"NotificationNew\"\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n\n      if (result.user_artifacts) {\n        this.setState({\n          notifications: result.user_artifacts\n        });\n      }\n    }, error => {\n      alert(\"error!\");\n    });\n  }\n\n  render() {\n    //console.log(this.props.notification.user_id)\n    return (\n      /* <h1> notifications</h1> */\n      React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, this.state.notifications.reverse().map(notification => React.createElement(Notification, {\n        key: notification.user_id,\n        notification: notification,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      })))\n    );\n  }\n\n  addNotification(e, artifacttype) {\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/uacontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"addOrEditUserArtifacts\",\n        user_id: sessionStorage.getItem(\"user\"),\n        session_token: sessionStorage.getItem(\"token\"),\n        userid: sessionStorage.getItem(\"user\"),\n        artifactcategory: \"Notification\",\n        artifacttype: artifacttype\n      })\n    }).then(res => res.json()).then(result => {\n      if (result.user_artifacts) {\n        this.setState({\n          notifications: result.user_artifacts\n        });\n      }\n    });\n    /* Second fetch call to count notifications */\n  }\n\n}","map":{"version":3,"sources":["/Users/anthonyhom/Documents/atam-web/src/Component/NotificationList.js"],"names":["React","Notification","NotificationList","Component","constructor","props","state","userid","notifications","componentDidMount","fetch","method","body","JSON","stringify","action","sessionStorage","getItem","artifactcategory","then","res","json","result","console","log","user_artifacts","setState","error","alert","render","reverse","map","notification","user_id","addNotification","e","artifacttype","session_token"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,YAAP;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,eAAe,MAAMC,gBAAN,SAA+BF,KAAK,CAACG,SAArC,CAA+C;AAC5DC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,MAAM,EAAE,EADG;AAEXC,MAAAA,aAAa,EAAE;AAFJ,KAAb;AAID;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB;AACA;AACAC,IAAAA,KAAK,CAAC,+DAAD,EAAkE;AACrEC,MAAAA,MAAM,EAAE,MAD6D;AAErEC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,MAAM,EAAE,kBADW;AAEnBR,QAAAA,MAAM,EAAES,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAFW;AAGnBC,QAAAA,gBAAgB,EAAE;AAHC,OAAf;AAF+D,KAAlE,CAAL,CAQGC,IARH,CAQSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EARjB,EASGF,IATH,CAUKG,MAAD,IAAY;AACVC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AAEA,UAAIA,MAAM,CAACG,cAAX,EAA2B;AACzB,aAAKC,QAAL,CAAc;AACZlB,UAAAA,aAAa,EAAEc,MAAM,CAACG;AADV,SAAd;AAGD;AACF,KAlBL,EAmBKE,KAAD,IAAW;AACTC,MAAAA,KAAK,CAAC,QAAD,CAAL;AACD,KArBL;AAuBD;;AAEDC,EAAAA,MAAM,GAAG;AACP;AACA;AACE;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMG,KAAKvB,KAAL,CAAWE,aAAX,CAAyBsB,OAAzB,GAAmCC,GAAnC,CAAwCC,YAAD,IACtC,oBAAC,YAAD;AACE,QAAA,GAAG,EAAEA,YAAY,CAACC,OADpB;AAC6B,QAAA,YAAY,EAAED,YAD3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CANH;AAFF;AAeD;;AACDE,EAAAA,eAAe,CAACC,CAAD,EAAIC,YAAJ,EAAkB;AAC/B1B,IAAAA,KAAK,CAAC,+DAAD,EAAkE;AACrEC,MAAAA,MAAM,EAAE,MAD6D;AAErEC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,MAAM,EAAE,wBADW;AAEnBkB,QAAAA,OAAO,EAAEjB,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAFU;AAGnBoB,QAAAA,aAAa,EAAErB,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAHI;AAInBV,QAAAA,MAAM,EAAES,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAJW;AAMnBC,QAAAA,gBAAgB,EAAE,cANC;AAQnBkB,QAAAA,YAAY,EAAEA;AARK,OAAf;AAF+D,KAAlE,CAAL,CAaGjB,IAbH,CAaSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAbjB,EAcGF,IAdH,CAcSG,MAAD,IAAY;AAChB,UAAIA,MAAM,CAACG,cAAX,EAA2B;AACzB,aAAKC,QAAL,CAAc;AACZlB,UAAAA,aAAa,EAAEc,MAAM,CAACG;AADV,SAAd;AAGD;AACF,KApBH;AAqBE;AAEH;;AA/E2D","sourcesContent":["import React from \"react\";\nimport \"../App.css\";\nimport Notification from \"../Component/Notification\";\nexport default class NotificationList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userid: \"\",\n      notifications: [],\n    };\n  }\n\n  componentDidMount() {\n    //we call results here\n    //make the api call to the user API to get the user with all of their attached preferences\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/uacontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getUserArtifacts\",\n        userid: sessionStorage.getItem(\"user\"),\n        artifactcategory: \"NotificationNew\",\n      }),\n    })\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          console.log(result);\n\n          if (result.user_artifacts) {\n            this.setState({\n              notifications: result.user_artifacts,\n            });\n          }\n        },\n        (error) => {\n          alert(\"error!\");\n        }\n      );\n  }\n  \n  render() {\n    //console.log(this.props.notification.user_id)\n    return (\n      /* <h1> notifications</h1> */\n      <div>\n        {/* //     <button onClick={(e) => this.addNotification(e, \"liked\")}> */}\n        {/* //       {\" \"} */}\n        {/* //       Click here */}\n        {/* //     </button> */}\n        {/* //     <button onClick={(e) => this.addNotification(e)}> Comment</button> */}\n        {this.state.notifications.reverse().map((notification) => (\n          <Notification\n            key={notification.user_id} notification={notification}\n          />\n        ))}\n      </div>\n    );\n  }\n  addNotification(e, artifacttype) {\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/uacontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"addOrEditUserArtifacts\",\n        user_id: sessionStorage.getItem(\"user\"),\n        session_token: sessionStorage.getItem(\"token\"),\n        userid: sessionStorage.getItem(\"user\"),\n\n        artifactcategory: \"Notification\",\n\n        artifacttype: artifacttype,\n      }),\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        if (result.user_artifacts) {\n          this.setState({\n            notifications: result.user_artifacts,\n          });\n        }\n      });\n      /* Second fetch call to count notifications */\n    \n  }\n}\n"]},"metadata":{},"sourceType":"module"}