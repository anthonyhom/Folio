{"ast":null,"code":"var _jsxFileName = \"/Users/anthonyhom/Documents/atam-web/src/Component/FollowersList.js\";\nimport React from \"react\";\nimport \"../App.css\";\nimport Modal from \"./Modal\";\nimport ProfileModal from \"./ProfileModal.js\";\nexport default class FollowersList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.showFollowingModal = e => {\n      this.setState({\n        showModal3: !this.state.showModal3\n      });\n    };\n\n    this.onClose = e => {\n      this.props.onClose && this.props.onClose(e);\n    };\n\n    this.loadConnections = () => {\n      fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/connectioncontroller.php\", {\n        method: \"post\",\n        body: JSON.stringify({\n          action: \"getConnections\",\n          connectuserid: sessionStorage.getItem(\"user\")\n        })\n      }).then(res => res.json()).then(result => {\n        if (result.connections !== undefined) {\n          this.setState({\n            connections: result.connections\n          });\n        }\n\n        console.log(result);\n      }, error => {\n        this.setState({\n          error\n        });\n      });\n    };\n\n    this.showProfileModal = e => {\n      if (sessionStorage.getItem(\"user\") !== this.props.post.user_id) {\n        this.setState({\n          showProfile: !this.state.showProfile\n        });\n      }\n    };\n\n    this.state = {\n      showModal3: false,\n      connections: [],\n      error: null,\n      userid: sessionStorage.getItem(\"user\"),\n      followername: \"\",\n      showProfile: false\n    };\n  }\n\n  getFollowerName(id) {\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getConnections\",\n        userid: id\n      })\n    }).then(res => res.json()).then(result => {\n      if (result.users[0].name !== null) {\n        this.setState({\n          followername: result.users[0].name\n        }); // sessionStorage.setItem(\"dname\", result.users[0].name);\n      }\n    }, error => {\n      this.setState({\n        error\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.loadConnections();\n  }\n\n  render() {\n    //this.loadPosts();\n    const {\n      error,\n      connections\n    } = this.state;\n    let outerModal = React.createRef();\n\n    if (error) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \" Error: \", error.message, \" \");\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, connections.map(connection => React.createElement(\"div\", {\n        key: connection.connection_id,\n        className: \"userlist\",\n        onClick: e => this.showProfileModal(e),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, connection.user_name))), React.createElement(ProfileModal, {\n        show: this.state.showProfile,\n        onClose: e => this.showProfileModal(e),\n        userid: this.props.post.user_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }));\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/anthonyhom/Documents/atam-web/src/Component/FollowersList.js"],"names":["React","Modal","ProfileModal","FollowersList","Component","constructor","props","showFollowingModal","e","setState","showModal3","state","onClose","loadConnections","fetch","method","body","JSON","stringify","action","connectuserid","sessionStorage","getItem","then","res","json","result","connections","undefined","console","log","error","showProfileModal","post","user_id","showProfile","userid","followername","getFollowerName","id","users","name","componentDidMount","render","outerModal","createRef","message","map","connection","connection_id","user_name"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../App.css\";\nimport Modal from \"./Modal\";\nimport ProfileModal from \"./ProfileModal.js\";\n\nexport default class FollowersList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal3: false,\n      connections: [],\n      error: null,\n      userid: sessionStorage.getItem(\"user\"),\n      followername: \"\",\n      showProfile: false,\n    };\n  }\n\n  showFollowingModal = (e) => {\n    this.setState({\n      showModal3: !this.state.showModal3,\n    });\n  };\n\n  onClose = (e) => {\n    this.props.onClose && this.props.onClose(e);\n  };\n\n  loadConnections = () => {\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/connectioncontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getConnections\",\n        connectuserid: sessionStorage.getItem(\"user\")\n      })\n    })\n      .then(res => res.json())\n      .then(\n        result => {\n          if (result.connections !== undefined) {\n            this.setState({\n              connections: result.connections\n            });\n          }\n          console.log(result)\n        },\n        error => {\n          this.setState({\n            error\n          });\n        }\n      );\n  }\n\n  showProfileModal = (e) => {\n    if (sessionStorage.getItem(\"user\") !== this.props.post.user_id) {\n      this.setState({\n        showProfile: !this.state.showProfile,\n      });\n    }\n  };\n\n  getFollowerName(id){\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n        method: \"post\",\n        body: JSON.stringify({\n          action: \"getConnections\",\n          userid: id,\n        })\n      })\n      .then(res => res.json())\n      .then(\n        result => {\n            if (result.users[0].name !== null) {\n                this.setState({\n                  followername: result.users[0].name,\n                });\n                // sessionStorage.setItem(\"dname\", result.users[0].name);\n              }\n            },\n            error => {\n                this.setState({\n                  error\n                });\n              }\n            );\n    }\n\n\n  componentDidMount(){\n    this.loadConnections()\n  }\n\n  render() {\n    //this.loadPosts();\n    const {error, connections} = this.state;\n    let outerModal = React.createRef();\n    \n    if (error) {\n      return <div> Error: {error.message} </div>;\n    } else {\n      return (\n        <div>\n          <ul>\n            {connections.map(connection => (\n              <div key={connection.connection_id} className=\"userlist\" onClick={(e) => this.showProfileModal(e)}>\n                {connection.user_name}\n              </div>\n            ))}\n          </ul>\n        <ProfileModal\n          show={this.state.showProfile}\n          onClose={(e) => this.showProfileModal(e)}\n          userid={this.props.post.user_id}\n        />\n        </div>\n      );\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}