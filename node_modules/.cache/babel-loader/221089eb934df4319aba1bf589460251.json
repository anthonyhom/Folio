{"ast":null,"code":"var _jsxFileName = \"/Users/anthonyhom/Documents/atam-web/src/Component/CommentList.js\";\nimport React from \"react\";\nimport Post from \"./Post.js\";\nimport Comment from \"./Comment.js\";\nexport default class CommentList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      commentPosts: []\n    }; // this.posts = React.createRef();\n  }\n\n  componentDidMount() {\n    console.log(this.props.postId);\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/postcontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getPosts\",\n        parentid: this.props.posts\n      })\n    }).then(res => res.json()).then(result => {\n      if (result.posts) {\n        this.setState({\n          commentPosts: result.posts\n        }); // console.log(this.props.post.post_id);\n      }\n    }, error => {\n      alert(\"error!\");\n    });\n  } // getTitle = postid => {\n  //   //make the api call to the authentication page\n  //   fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/ptcontroller.php\", {\n  //     method: \"post\",\n  //     body: JSON.stringify({\n  //       action: \"getPostTags\",\n  //       postid: postid\n  //     })\n  //   })\n  //     .then(res => res.json())\n  //     .then(\n  //       result => {\n  //         if (result.post_tags !== undefined) {\n  //           for (var i = 0; i < result.post_tags.length; i++) {\n  //             if (result.post_tags[i].tag_type === \"Title\") {\n  //               // console.log(result.post_tags[i].tag);\n  //               this.title = result.post_tags[i].tag;\n  //             }\n  //           }\n  //         }\n  //         console.log(this.title);\n  //       },\n  //       error => {\n  //         alert(\"error!\");\n  //       }\n  //     );\n  //   return this.title;\n  // };\n  // getGenre = postid => {\n  //   // console.log(postid);\n  //   //make the api call to the authentication page\n  //   fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/ptcontroller.php\", {\n  //     method: \"post\",\n  //     body: JSON.stringify({\n  //       action: \"getPostTags\",\n  //       postid: postid\n  //     })\n  //   })\n  //     .then(res => res.json())\n  //     .then(\n  //       result => {\n  //         if (result.post_tags !== undefined) {\n  //           for (var i = 0; i < result.post_tags.length; i++) {\n  //             if (result.post_tags[i].tag_type === \"Genre\") {\n  //               return result.post_tags[i].tag;\n  //             }\n  //           }\n  //         }\n  //       },\n  //       error => {\n  //         alert(\"error!\");\n  //       }\n  //     );\n  // };\n\n\n  render() {\n    //this.loadPosts();\n    const {\n      error,\n      isLoaded,\n      commentPosts\n    } = this.state; // this.getTitle(125);\n    // console.log(this.state.title);\n    // var titles = [];\n    // var genres = [];\n    // for (var i = 0; i < posts.length; i++) {\n    //   // console.log(this.getTitle(posts[i].post_id));\n    //   titles[i] = this.getTitle(posts[i].post_id);\n    //   genres[i] = this.getGenre(posts[i].post_id);\n    // }\n    // console.log(titles);\n\n    return React.createElement(\"div\", {\n      className: \"comments\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, commentPosts.map(comment => React.createElement(Comment, {\n      key: comment.post_id,\n      post: comment,\n      type: this.props.type,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/anthonyhom/Documents/atam-web/src/Component/CommentList.js"],"names":["React","Post","Comment","CommentList","Component","constructor","props","state","error","commentPosts","componentDidMount","console","log","postId","fetch","method","body","JSON","stringify","action","parentid","posts","then","res","json","result","setState","alert","render","isLoaded","map","comment","post_id","type"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,OAAP,MAAoB,cAApB;AAEA,eAAe,MAAMC,WAAN,SAA0BH,KAAK,CAACI,SAAhC,CAA0C;AACvDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE,IADI;AAEXC,MAAAA,YAAY,EAAE;AAFH,KAAb,CAFiB,CAMjB;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClBC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKN,KAAL,CAAWO,MAAvB;AACAC,IAAAA,KAAK,CAAC,iEAAD,EAAoE;AACvEC,MAAAA,MAAM,EAAE,MAD+D;AAEvEC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,MAAM,EAAE,UADW;AAEnBC,QAAAA,QAAQ,EAAE,KAAKd,KAAL,CAAWe;AAFF,OAAf;AAFiE,KAApE,CAAL,CAOGC,IAPH,CAOSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAPjB,EAQGF,IARH,CASKG,MAAD,IAAY;AACV,UAAIA,MAAM,CAACJ,KAAX,EAAkB;AAChB,aAAKK,QAAL,CAAc;AACZjB,UAAAA,YAAY,EAAEgB,MAAM,CAACJ;AADT,SAAd,EADgB,CAIhB;AACD;AACF,KAhBL,EAiBKb,KAAD,IAAW;AACTmB,MAAAA,KAAK,CAAC,QAAD,CAAL;AACD,KAnBL;AAqBD,GAjCsD,CAkCvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAC,EAAAA,MAAM,GAAG;AACP;AACA,UAAM;AAAEpB,MAAAA,KAAF;AAASqB,MAAAA,QAAT;AAAmBpB,MAAAA;AAAnB,QAAoC,KAAKF,KAA/C,CAFO,CAIP;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;;AAEA,WACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGE,YAAY,CAACqB,GAAb,CAAkBC,OAAD,IAChB,oBAAC,OAAD;AACE,MAAA,GAAG,EAAEA,OAAO,CAACC,OADf;AAEE,MAAA,IAAI,EAAED,OAFR;AAGE,MAAA,IAAI,EAAE,KAAKzB,KAAL,CAAW2B,IAHnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADH,CADF;AAWD;;AAtHsD","sourcesContent":["import React from \"react\";\nimport Post from \"./Post.js\";\nimport Comment from \"./Comment.js\";\n\nexport default class CommentList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      commentPosts: [],\n    };\n    // this.posts = React.createRef();\n  }\n\n  componentDidMount() {\n    console.log(this.props.postId);\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/postcontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getPosts\",\n        parentid: this.props.posts,\n      }),\n    })\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          if (result.posts) {\n            this.setState({\n              commentPosts: result.posts,\n            });\n            // console.log(this.props.post.post_id);\n          }\n        },\n        (error) => {\n          alert(\"error!\");\n        }\n      );\n  }\n  // getTitle = postid => {\n  //   //make the api call to the authentication page\n  //   fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/ptcontroller.php\", {\n  //     method: \"post\",\n  //     body: JSON.stringify({\n  //       action: \"getPostTags\",\n  //       postid: postid\n  //     })\n  //   })\n  //     .then(res => res.json())\n  //     .then(\n  //       result => {\n  //         if (result.post_tags !== undefined) {\n  //           for (var i = 0; i < result.post_tags.length; i++) {\n  //             if (result.post_tags[i].tag_type === \"Title\") {\n  //               // console.log(result.post_tags[i].tag);\n  //               this.title = result.post_tags[i].tag;\n  //             }\n  //           }\n  //         }\n  //         console.log(this.title);\n  //       },\n  //       error => {\n  //         alert(\"error!\");\n  //       }\n  //     );\n  //   return this.title;\n  // };\n\n  // getGenre = postid => {\n  //   // console.log(postid);\n  //   //make the api call to the authentication page\n  //   fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/ptcontroller.php\", {\n  //     method: \"post\",\n  //     body: JSON.stringify({\n  //       action: \"getPostTags\",\n  //       postid: postid\n  //     })\n  //   })\n  //     .then(res => res.json())\n  //     .then(\n  //       result => {\n  //         if (result.post_tags !== undefined) {\n  //           for (var i = 0; i < result.post_tags.length; i++) {\n  //             if (result.post_tags[i].tag_type === \"Genre\") {\n  //               return result.post_tags[i].tag;\n  //             }\n  //           }\n  //         }\n  //       },\n  //       error => {\n  //         alert(\"error!\");\n  //       }\n  //     );\n  // };\n\n  render() {\n    //this.loadPosts();\n    const { error, isLoaded, commentPosts } = this.state;\n\n    // this.getTitle(125);\n    // console.log(this.state.title);\n    // var titles = [];\n    // var genres = [];\n\n    // for (var i = 0; i < posts.length; i++) {\n    //   // console.log(this.getTitle(posts[i].post_id));\n    //   titles[i] = this.getTitle(posts[i].post_id);\n    //   genres[i] = this.getGenre(posts[i].post_id);\n    // }\n\n    // console.log(titles);\n\n    return (\n      <div className=\"comments\">\n        {commentPosts.map((comment) => (\n          <Comment\n            key={comment.post_id}\n            post={comment}\n            type={this.props.type}\n          />\n        ))}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}