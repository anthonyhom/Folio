{"ast":null,"code":"var _jsxFileName = \"/Users/anthonyhom/Documents/atam-web/src/Component/Profile.js\";\nimport React from \"react\";\nimport \"../App.css\";\nimport \"../css/profile.css\";\nimport \"./Post.js\";\nimport \"./PostingList.js\";\nimport Settings from \"./Settings\";\nimport \"../css/settings.css\";\nimport FriendList from \"./FriendList\";\nimport FollowersList from \"./FollowersList\";\nimport Modal from \"./Modal\";\nexport default class Profile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getUsername = userid => {\n      fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n        method: \"post\",\n        body: JSON.stringify({\n          action: \"getUsers\",\n          userid: userid\n        })\n      }).then(res => res.json()).then(result => {\n        console.log(result.users[0]);\n        this.setState({\n          fname: result.users[0].first_name,\n          lname: result.users[0].last_name\n        });\n      }, error => {\n        alert(\"error!\");\n      });\n    };\n\n    this.showSettingsModal = e => {\n      this.setState({\n        showModal: !this.state.showModal\n      });\n      console.log(this.state.showModal);\n    };\n\n    this.showFollowingModal = e => {\n      this.setState({\n        showModal2: !this.state.showModal2\n      });\n      console.log(this.state.showModal2);\n    };\n\n    this.showFollowersModal = e => {\n      this.setState({\n        showModal3: !this.state.showModal3\n      });\n    };\n\n    this.logout = e => {\n      fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n        method: \"post\",\n        body: JSON.stringify({\n          action: \"getUsers\",\n          userid: sessionStorage.getItem(\"user\")\n        })\n      }).then(res => res.json()).then(result => {\n        let email = result.users[0].email_addr;\n        return fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/SocialAuth.php\", {\n          method: \"post\",\n          body: JSON.stringify({\n            action: \"logout\",\n            username: email,\n            session_token: sessionStorage.getItem(\"token\")\n          })\n        }).then(resp => resp.json()).then(response => {\n          sessionStorage.clear();\n          window.location.reload(false);\n        }, error => {\n          alert(\"error!\");\n        });\n      }, error => {\n        alert(\"error!\");\n      });\n    };\n\n    this.getUserArtifacts = (artifact_cat, artifact_item) => {\n      fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/uacontroller.php\", {\n        method: \"post\",\n        body: JSON.stringify({\n          action: \"getUserArtifacts\",\n          userid: sessionStorage.getItem(\"user\"),\n          artifactcategory: artifact_cat\n        })\n      }).then(res => res.json()).then(result => {\n        if (result.user_artifacts === undefined) {\n          return fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/uacontroller.php\", {\n            method: \"post\",\n            body: JSON.stringify({\n              action: \"addOrEditUserArtifacts\",\n              user_id: sessionStorage.getItem(\"user\"),\n              userid: sessionStorage.getItem(\"user\"),\n              session_token: sessionStorage.getItem(\"token\"),\n              artifacttype: \"profileSettings\",\n              artifactcategory: artifact_cat,\n              artifacturl: artifact_item\n            })\n          }).then(resp => resp.json()).then(response => {}, error => {\n            alert(\"error!\");\n          });\n        } else {\n          if (artifact_cat === \"profilePic\") {\n            this.setState({\n              profilePic: result.user_artifacts[0].artifact_url\n            });\n          } else if (artifact_cat === \"bio\") {\n            this.setState({\n              bio: result.user_artifacts[0].artifact_url\n            });\n          } else if (artifact_cat === \"crowdfunding\") {\n            this.setState({\n              crowdfunding: result.user_artifacts[0].artifact_url\n            });\n          } else if (artifact_cat === \"freelance\") {\n            this.setState({\n              freelance: result.user_artifacts[0].artifact_url\n            });\n          }\n        }\n      }, error => {\n        alert(\"error!\");\n      });\n    };\n\n    this.state = {\n      showModal: false,\n      showModal2: false,\n      showModal3: false,\n      dname: \"\",\n      fname: \"\",\n      lname: \"\",\n      bio: \"\",\n      crowdfunding: \"\",\n      profilePic: \"\",\n      liked: false,\n      artifactID: \"\",\n      freelance: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.getUserArtifacts(\"profilePic\", \"https://www.svgrepo.com/show/213315/avatar-profile.svg\");\n    this.getUserArtifacts(\"bio\", \"Hey Update Me!\");\n    this.getUserArtifacts(\"crowdfunding\", \"Hey Update Me!\");\n    this.getUserArtifacts(\"freelance\", \"Hey Update Me\");\n    this.getUsername(sessionStorage.getItem(\"user\"));\n  }\n\n  render() {\n    // Check If we have a profile pic already loaded, if not get info from user artifacts\n    return React.createElement(\"div\", {\n      className: \"side-bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"edit-profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"\",\n      className: \"edit-img\",\n      src: require(\"../Images/pencil_white.svg\"),\n      onClick: e => this.showSettingsModal(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"profile-pic-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"\",\n      className: \"profile-pic\",\n      src: this.state.profilePic,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"user-info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"name-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"display-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, sessionStorage.getItem(\"dname\"))), React.createElement(\"div\", {\n      className: \"display-flname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, this.state.fname, \" \", this.state.lname)), React.createElement(\"div\", {\n      className: \"follow-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"followinglist-button\",\n      onClick: e => this.showFollowingModal(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, \"Following\"), React.createElement(\"button\", {\n      className: \"followerlist-button\",\n      onClick: e => this.showFollowersModal(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, \"Followers\")), React.createElement(\"div\", {\n      className: \"user-bio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Bio: \"), this.state.bio), React.createElement(\"div\", {\n      className: \"crowdfund-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, \"Crowdfunding: \"), React.createElement(\"a\", {\n      href: this.state.crowdfunding,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, this.state.crowdfunding)), React.createElement(\"div\", {\n      className: \"freelance-link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"Freelance: \"), React.createElement(\"a\", {\n      href: this.state.freelance,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, this.state.freelance)), React.createElement(\"button\", {\n      className: \"logout-button\",\n      onClick: e => this.logout(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"LOGOUT\")), React.createElement(Settings, {\n      show: this.state.showModal,\n      onClose: e => this.showSettingsModal(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }), React.createElement(Modal, {\n      show: this.state.showModal2,\n      onClose: e => this.showFollowingModal(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(FriendList, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    })), React.createElement(Modal, {\n      show: this.state.showModal3,\n      onClose: e => this.showFollowersModal(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(FollowersList, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/anthonyhom/Documents/atam-web/src/Component/Profile.js"],"names":["React","Settings","FriendList","FollowersList","Modal","Profile","Component","constructor","props","getUsername","userid","fetch","method","body","JSON","stringify","action","then","res","json","result","console","log","users","setState","fname","first_name","lname","last_name","error","alert","showSettingsModal","e","showModal","state","showFollowingModal","showModal2","showFollowersModal","showModal3","logout","sessionStorage","getItem","email","email_addr","username","session_token","resp","response","clear","window","location","reload","getUserArtifacts","artifact_cat","artifact_item","artifactcategory","user_artifacts","undefined","user_id","artifacttype","artifacturl","profilePic","artifact_url","bio","crowdfunding","freelance","dname","liked","artifactID","componentDidMount","render","require"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../App.css\";\nimport \"../css/profile.css\";\nimport \"./Post.js\";\nimport \"./PostingList.js\";\nimport Settings from \"./Settings\";\nimport \"../css/settings.css\";\nimport FriendList from \"./FriendList\";\nimport FollowersList from \"./FollowersList\";\nimport Modal from \"./Modal\";\n\nexport default class Profile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      showModal2: false,\n      showModal3: false,\n      dname: \"\",\n      fname: \"\",\n      lname: \"\",\n      bio: \"\",\n      crowdfunding: \"\",\n      profilePic: \"\",\n      liked: false,\n      artifactID: \"\",\n      freelance: \"\",\n    };\n  }\n\n  componentDidMount() {\n    this.getUserArtifacts(\n      \"profilePic\",\n      \"https://www.svgrepo.com/show/213315/avatar-profile.svg\"\n    );\n    this.getUserArtifacts(\"bio\", \"Hey Update Me!\");\n    this.getUserArtifacts(\"crowdfunding\", \"Hey Update Me!\");\n    this.getUserArtifacts(\"freelance\", \"Hey Update Me\");\n    this.getUsername(sessionStorage.getItem(\"user\"));\n  }\n\n  getUsername = (userid) => {\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getUsers\",\n        userid: userid,\n      }),\n    })\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          console.log(result.users[0]);\n          this.setState({\n            fname: result.users[0].first_name,\n            lname: result.users[0].last_name,\n          });\n        },\n        (error) => {\n          alert(\"error!\");\n        }\n      );\n  };\n\n  showSettingsModal = (e) => {\n    this.setState({\n      showModal: !this.state.showModal,\n    });\n    console.log(this.state.showModal);\n  };\n  showFollowingModal = (e) => {\n    this.setState({\n      showModal2: !this.state.showModal2,\n    });\n    console.log(this.state.showModal2);\n  };\n  showFollowersModal = (e) => {\n    this.setState({\n      showModal3: !this.state.showModal3,\n    });\n  };\n\n  logout = (e) => {\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/usercontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getUsers\",\n        userid: sessionStorage.getItem(\"user\"),\n      }),\n    })\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          let email = result.users[0].email_addr;\n          return fetch(\n            \"http://stark.cse.buffalo.edu/cse410/atam/api/SocialAuth.php\",\n            {\n              method: \"post\",\n              body: JSON.stringify({\n                action: \"logout\",\n                username: email,\n                session_token: sessionStorage.getItem(\"token\"),\n              }),\n            }\n          )\n            .then((resp) => resp.json())\n            .then(\n              (response) => {\n                sessionStorage.clear();\n                window.location.reload(false);\n              },\n              (error) => {\n                alert(\"error!\");\n              }\n            );\n        },\n        (error) => {\n          alert(\"error!\");\n        }\n      );\n  };\n\n  getUserArtifacts = (artifact_cat, artifact_item) => {\n    fetch(\"http://stark.cse.buffalo.edu/cse410/atam/api/uacontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getUserArtifacts\",\n        userid: sessionStorage.getItem(\"user\"),\n        artifactcategory: artifact_cat,\n      }),\n    })\n      .then((res) => res.json())\n      .then(\n        (result) => {\n          if (result.user_artifacts === undefined) {\n            return fetch(\n              \"http://stark.cse.buffalo.edu/cse410/atam/api/uacontroller.php\",\n              {\n                method: \"post\",\n                body: JSON.stringify({\n                  action: \"addOrEditUserArtifacts\",\n                  user_id: sessionStorage.getItem(\"user\"),\n                  userid: sessionStorage.getItem(\"user\"),\n                  session_token: sessionStorage.getItem(\"token\"),\n                  artifacttype: \"profileSettings\",\n                  artifactcategory: artifact_cat,\n                  artifacturl: artifact_item,\n                }),\n              }\n            )\n              .then((resp) => resp.json())\n              .then(\n                (response) => {},\n                (error) => {\n                  alert(\"error!\");\n                }\n              );\n          } else {\n            if (artifact_cat === \"profilePic\") {\n              this.setState({\n                profilePic: result.user_artifacts[0].artifact_url,\n              });\n            } else if (artifact_cat === \"bio\") {\n              this.setState({\n                bio: result.user_artifacts[0].artifact_url,\n              });\n            } else if (artifact_cat === \"crowdfunding\") {\n              this.setState({\n                crowdfunding: result.user_artifacts[0].artifact_url,\n              });\n            } else if (artifact_cat === \"freelance\") {\n              this.setState({\n                freelance: result.user_artifacts[0].artifact_url,\n              });\n            }\n          }\n        },\n        (error) => {\n          alert(\"error!\");\n        }\n      );\n  };\n\n  render() {\n    // Check If we have a profile pic already loaded, if not get info from user artifacts\n    return (\n      <div className=\"side-bar\">\n        <div className=\"edit-profile\">\n          <img\n            alt=\"\"\n            className=\"edit-img\"\n            src={require(\"../Images/pencil_white.svg\")}\n            onClick={(e) => this.showSettingsModal(e)}\n          />\n        </div>\n        <div className=\"profile-pic-container\">\n          <img alt=\"\" className=\"profile-pic\" src={this.state.profilePic} />\n        </div>\n        <div className=\"user-info\">\n          <div className=\"name-container\">\n            <div className=\"display-name\">\n              <b>{sessionStorage.getItem(\"dname\")}</b>\n            </div>\n            <div className=\"display-flname\">\n              {this.state.fname} {this.state.lname}\n            </div>\n          </div>\n          <div className=\"follow-container\">\n            <button\n              className=\"followinglist-button\"\n              onClick={(e) => this.showFollowingModal(e)}\n            >\n              Following\n            </button>\n            <button\n              className=\"followerlist-button\"\n              onClick={(e) => this.showFollowersModal(e)}\n            >\n              Followers\n            </button>\n          </div>\n\n          <div className=\"user-bio\">\n            <h3>Bio: </h3>\n            {this.state.bio}\n          </div>\n          <div className=\"crowdfund-link\">\n            <h3>Crowdfunding: </h3>\n            <a href={this.state.crowdfunding}>{this.state.crowdfunding}</a>\n          </div>\n          <div className=\"freelance-link\">\n            <h3>Freelance: </h3>\n            <a href={this.state.freelance}>{this.state.freelance}</a>\n          </div>\n          <button className=\"logout-button\" onClick={(e) => this.logout(e)}>\n            LOGOUT\n          </button>\n        </div>\n        <Settings\n          show={this.state.showModal}\n          onClose={(e) => this.showSettingsModal(e)}\n        />\n        <Modal\n          show={this.state.showModal2}\n          onClose={(e) => this.showFollowingModal(e)}\n        >\n          <FriendList />\n        </Modal>\n        <Modal\n          show={this.state.showModal3}\n          onClose={(e) => this.showFollowersModal(e)}\n        >\n          <FollowersList />\n        </Modal>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}